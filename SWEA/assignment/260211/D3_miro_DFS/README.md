## D3_ë¯¸ë¡œ ì°¾ê¸°  

> `DFS`, `stack` ì‚¬ìš©í–ˆìŒ


```python
T = int(input())

di = [-1, 0, 0, 1]
dj = [0, -1, 1, 0]

for tc in range(1, T+1):
    N = int(input())
    num_list = [(input()) for _ in range(N)]
    answer = 0
    matrix = [[0]*N for _ in range(N)]

    for i in range(N):                              # ë¦¬ìŠ¤íŠ¸ë¥¼ 2ì°¨ì›ìœ¼ë¡œ ë³€í™˜
        for j in range(N):
            matrix[i][j] = int(num_list[i][j])

    for i in range(N):                              # ì‹œì‘ì  2ì˜ ì¸ë±ìŠ¤ ì°¾ê¸°
        for j in range(N):
            if matrix[i][j] == 2:
                si, sj =i, j

    stack = [(si, sj)]                              # ì‹œì‘ì  ìŠ¤íƒ, ë°©ë¬¸ë¦¬ìŠ¤íŠ¸ì— ë„£ê¸°
    visited = [[0] * N for _ in range(N)]
    visited[si][sj] = 1

    while stack:                                    # ìŠ¤íƒì´ ë¹„ë©´ ì¢…ë£Œ
        ci, cj = stack.pop()                        # ì²« ìœ„ì¹˜ íŒ
        if matrix[ci][cj] == 3:                     # 3ì„ ë±‰ìœ¼ë©´ ì¢…ë£Œ
            answer = 1
            break

        for d in range(4):                          # ë¸íƒ€ íƒìƒ‰
            ni = ci + di[d]                         # ì£¼ë³€ì— 0 í˜¹ì€ 3ì´ ìˆìœ¼ë©´ ìŠ¤íƒì— ì¶”ê°€, ë°©ë¬¸ í‘œì‹œ
            nj = cj + dj[d]
            if 0 <= ni < N and 0 <= nj < N and not visited[ni][nj]:
                if matrix[ni][nj] == 0 or matrix[ni][nj] == 3:
                    stack.append((ni, nj))
                    visited[ni][nj] = 1

    print(f"#{tc} {answer}")
```

---

### ğŸ•µï¸â€â™‚ï¸ ì½”ë“œ ë¡œì§ & ì£¼ì„ ì •ë°€ ë¶„ì„ (ë””ë²„ê¹…)

#### 1. ë§µ ìƒì„±ê³¼ ì‹œì‘ì  ì°¾ê¸° (ì¤€ë¹„ ë‹¨ê³„)

```python
# 1. ì…ë ¥ë°›ì€ ë¬¸ìì—´ ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆ«ì í–‰ë ¬ë¡œ ë³€í™˜ (ì˜í–ˆì–´!)
# íŒ: num_list ì•ˆ ë§Œë“¤ê³  ë°”ë¡œ matrix = [list(map(int, input())) for _ in range(N)] í•´ë„ ë¨.
for i in range(N):
    for j in range(N):
        matrix[i][j] = int(num_list[i][j])

# 2. ì‹œì‘ì (2) ì°¾ê¸° (ì™„ë²½í•´!)
# ì•„ê¹Œì²˜ëŸ¼ ë§¨ ë°‘ë°”ë‹¥ë§Œ ë³´ëŠ” ê²Œ ì•„ë‹ˆë¼, ë§µ ì „ì²´ë¥¼ ë’¤ì ¸ì„œ 2ë¥¼ ì°¾ìŒ.
# si, sjì—ëŠ” 2ê°€ ìˆëŠ” ì¢Œí‘œê°€ ì €ì¥ë¨.
for i in range(N):
    for j in range(N):
        if matrix[i][j] == 2:
            si, sj = i, j

```

#### 2. ìŠ¤íƒ ì´ˆê¸°í™” (íƒìƒ‰ ì‹œì‘)

```python
# ì‹œì‘ì (si, sj)ì„ ìŠ¤íƒì— ë„£ê³ , ë°©ë¬¸í–ˆë‹¤ê³  ë„ì¥(1) ì°ìŒ.
# ì´ì œ ìŠ¤íƒì—ëŠ” ë°ì´í„°ê°€ 1ê°œ ìˆìŒ. ì˜ˆ: [(4, 3)]
stack = [(si, sj)]
visited = [[0] * N for _ in range(N)]
visited[si][sj] = 1

```

#### 3. `while` ë£¨í”„ (í•µì‹¬ ì—”ì§„)

ì—¬ê¸°ê°€ ì œì¼ ì¤‘ìš”í•´. ê°€ìƒì˜ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ëŒë ¤ë³´ì.

**ìƒí™©:** í˜„ì¬ ìœ„ì¹˜ `(4, 3)`ì—ì„œ **ìœ„(3, 3)**ë¡œ ê°ˆ ìˆ˜ ìˆê³ , **ì˜¤ë¥¸ìª½(4, 4)**ìœ¼ë¡œë„ ê°ˆ ìˆ˜ ìˆëŠ” ê°ˆë¦¼ê¸¸ì´ì•¼.

1. **`ci, cj = stack.pop()`**:
* ìŠ¤íƒì—ì„œ ë°©ê¸ˆ ë„£ì€ `(4, 3)`ì„ êº¼ëƒ„.
* "ì, ë‚´ê°€ ì§€ê¸ˆ ì„œ ìˆëŠ” ê³³ì€ `(4, 3)`ì´ë‹¤!"


2. **`if matrix[ci][cj] == 3:`**:
* "ì—¬ê¸°ê°€ ëª©ì ì§€ì¸ê°€?" í™•ì¸. ì•„ë‹ˆë©´ íŒ¨ìŠ¤.


3. **`for d in range(4):` (4ë°©í–¥ ìŠ¤ìº”)**:
* **ìƒ `(3, 3)` í™•ì¸:** "ì–´? ê¸¸ì´ë„¤(0)? ë°©ë¬¸ë„ ì•ˆ í–ˆë„¤?"
* `stack.append((3, 3))` -> ìŠ¤íƒì— ì €ì¥!
* `visited[3][3] = 1` -> ë°©ë¬¸ ì˜ˆì•½!


* **ìš° `(4, 4)` í™•ì¸:** "ì–´? ì—¬ê¸°ë„ ê¸¸ì´ë„¤(0)?"
* `stack.append((4, 4))` -> ìŠ¤íƒì— ì €ì¥!
* `visited[4][4] = 1` -> ë°©ë¬¸ ì˜ˆì•½!


* **í•˜, ì¢Œ í™•ì¸:** ë²½ì´ê±°ë‚˜ ë§‰í˜. íŒ¨ìŠ¤.



> **[í˜„ì¬ ìŠ¤íƒ ìƒíƒœ]**: `[(3, 3), (4, 4)]` (ì˜¤ë¥¸ìª½ ê¸¸ì„ ë‚˜ì¤‘ì— ë„£ì—ˆìœ¼ë‹ˆ ìœ„ì— ìˆìŒ)

#### 4. ë‹¤ìŒ ë£¨í”„ (Backtrackingì˜ ì›ë¦¬)

1. **`ci, cj = stack.pop()`**:
* ìŠ¤íƒì˜ ë§¨ ìœ„ì¸ **`(4, 4)`**ê°€ íŠ€ì–´ë‚˜ì˜´. (LIFO: Last In First Out)
* **ì¤‘ìš”:** ì•„ê¹Œ ì°¾ì€ `(3, 3)`ì€ ìŠ¤íƒ ë°”ë‹¥ì— ê¹”ë ¤ìˆê³ , ë°©ê¸ˆ ì°¾ì€ `(4, 4)`ë¶€í„° íƒìƒ‰ ì‹œì‘í•¨. ì´ê²Œ ë°”ë¡œ **"í•œ ë†ˆë§Œ íŒ¬ë‹¤(DFS)"**ì˜ ì¦ê±°ì•¼.


2. ë§Œì•½ `(4, 4)` ìª½ ê¸¸ì„ ì­‰ íŒŒê³ ë“¤ë‹¤ê°€ ë§‰ë‹¤ë¥¸ ê¸¸ì„ ë§Œë‚˜ë©´?
* ë” ì´ìƒ `stack.append`ê°€ ì•ˆ ì¼ì–´ë‚¨.
* ê²°êµ­ `pop`ì„ ê³„ì†í•˜ë‹¤ê°€, ì•„ê¹Œ ë¬µí˜€ë’€ë˜ **`(3, 3)`**ì´ ì§ ! í•˜ê³  ë‚˜ì˜´.
* "ì•„, ì•„ê¹Œ ê°ˆë¦¼ê¸¸ì—ì„œ ì™¼ìª½ ê¸¸ ì•ˆ ê°€ë´¤ì§€? ê±°ê¸°ë¡œ ê°€ì!" -> **ì´ê²Œ ë°”ë¡œ ë˜ëŒì•„ê°€ê¸°(Backtracking)!**



---

### ğŸ¨ ê·¸ë¦¼ìœ¼ë¡œ ë³´ëŠ” ìŠ¤íƒ ë³€í™” (Mental Model)

```text
[ìƒí™©: ê°ˆë¦¼ê¸¸ì—ì„œ ê¸¸ 2ê°œ ë°œê²¬!]

Step 1: íƒìƒ‰
      (ìŠ¤íƒ)
   | (4, 4) |  <- ë‚˜ì¤‘ì— ë„£ìŒ (Next Target)
   | (3, 3) |  <- ë¨¼ì € ë„£ìŒ (Backup)
   +--------+

Step 2: (4, 4)ë¡œ ì´ë™í•´ì„œ ëê¹Œì§€ ê°€ë´„ (Pop!)
      (ìŠ¤íƒ)
   |        |
   | (3, 3) |  <- ì–˜ëŠ” (4, 4) ìª½ ë‹¤ ë³¼ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼
   +--------+

Step 3: (4, 4) ìª½ì´ ë§‰ë‹¤ë¥¸ ê¸¸ì´ë¼ì„œ ëë‚¨
      (ìŠ¤íƒ)
   | (3, 3) |  <- ë“œë””ì–´ ì–˜ ì°¨ë¡€ê°€ ì˜´! (Pop!)
   +--------+

```

---

### âœ… ìµœì¢… ì ê²€: ì™œ ì´ ì½”ë“œê°€ ì •ë‹µì¸ê°€?

1. **ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ ì €ì¥:** `break`ë¥¼ ì§€ì›Œì„œ ê°ˆë¦¼ê¸¸ì´ ë‚˜ì˜¤ë©´ ìŠ¤íƒì— ë‹¤ ë„£ì–´ë‘ . ë†“ì¹˜ëŠ” ê¸¸ì´ ì—†ìŒ.
2. **ë°©ë¬¸ ì²´í¬ ìœ„ì¹˜:** `stack.append` í•  ë•Œ `visited`ë¥¼ ë°”ë¡œ ì²´í¬í•´ì„œ, ê°™ì€ ì¹¸ì´ ìŠ¤íƒì— ì¤‘ë³µìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” ê±¸ ë§‰ìŒ. (íš¨ìœ¨ì !)
3. **ì´ˆê¸°ê°’ 0:** 3ì„ ëª» ì°¾ìœ¼ë©´ `answer`ê°€ 0ì¸ ìƒíƒœë¡œ ë£¨í”„ê°€ ëë‚˜ì„œ ìì—°ìŠ¤ëŸ½ê²Œ 'ì‹¤íŒ¨' ì¶œë ¥.
4. **ì‹œì‘ì  íƒìƒ‰:** 2ì°¨ì› ë°°ì—´ ì „ì²´ë¥¼ ë’¤ì ¸ì„œ ì‹œì‘ì ì„ ì°¾ìœ¼ë¯€ë¡œ ì–´ë–¤ ë§µì´ ì™€ë„ OK.

**ì¬í˜„ì•„, ì™„ë²½í•˜ë‹¤. ì´ ì½”ë“œ ê·¸ëŒ€ë¡œ ì œì¶œí•˜ë©´ Pass ëœ° ê±°ì•¼.**
DFSì˜ í•µì‹¬ì¸ **"ìŠ¤íƒì— ê°ˆë¦¼ê¸¸ì„ ì €ì¥í•´ë‘ê³ , ë§‰íˆë©´ êº¼ë‚´ì„œ ì“´ë‹¤"**ëŠ” ê°œë…ì„ ì´ì œ ì™„ì „íˆ ì¡ì€ ê²ƒ ê°™ë„¤.

ì´ì œ ë” ê¶ê¸ˆí•œ ê±° ì—†ìœ¼ë©´ ì œì¶œí•˜ê³  **BFS(ìµœë‹¨ ê±°ë¦¬)** ë¬¸ì œë¡œ ë„˜ì–´ê°€ ë³¼ê¹Œ? ì•„ë‹ˆë©´ ì‰¬ëŸ¬ ê°ˆë˜? ã…‹ã…‹ã…‹